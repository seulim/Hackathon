@using GMKT.GMobile.Constant;
@using GMKT.GMobile.Web.Models.EventV2;
@using GMKT.GMobile.Data;

@model PluszoneModel

<!-- CONTENT -->
	<div id="content" class="ctns">
		@Html.Partial("Event/_NavigationBar", @Model.NaviIcons,new ViewDataDictionary { { "selectTab", "플러스존" } })
        
        <div class="banner_box">
			<a href="#"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/sample_640x130.jpg" alt="" /></a>
		</div>	
		<div class="box_pluszone01">
			<div class="box_flex01">
				<!-- 룰렛 -->
				<div class="rltt_wrap_main">
					<div class="rltt">
					<!-- 수정 날싸 지정 -->
					@{
						DateTime nowDate = DateTime.Now;
						DateTime changeDate = new DateTime(2014, 2, 1, 0, 0, 0);
						int compareDate = DateTime.Compare(nowDate, changeDate);
						
						if (compareDate < 0) 
						{
						<img src="@Urls.MobileImageUrlV2/640/img_pzone_rltt.png" alt="룰렛" class="rltt_img" id="rlttImage" />
						}
						
						else 
						{
						<img src="@Urls.MobileImageUrlV2/640/(new)img_pzone_rltt.png" alt="룰렛" class="rltt_img" id="rlttImage" />
						}
					}
					<img src="@Urls.MobileImageUrlV2/640/img_pzone_pin.png" alt="핀" class="rltt_pin" />
					<a href="#" class="rltt_start" id="rlttStart"><img src="@Urls.MobileImageUrlV2/640/btn_pzone_start.png" alt="룰렛돌리고 출석체크하고 START" /></a>
					</div>
				</div>
				<!-- //룰렛 -->
@{
	string attendance = "";
	if ( PageAttr.IsLogin )
	{
		attendance = Model.AttendanceCount.ToString();
	}
	else
	{
		attendance = "?";
	}
}		
            </div>
			
			<div class="box_flex02">			
            <!-- 140221_수정 -->
				<!-- 달력 -->
				<div class="atnd_wrap_main">
					<div class="atnd">
						<div class="box_state">
@if (PageAttr.IsLogin)
{
    string displayCustName = "";
    if (string.IsNullOrEmpty(GMKTWebContext.Current.UserProfile.CustName) == false)
    {
        if (GMKTWebContext.Current.UserProfile.CustName.Length > 4)
        {
            displayCustName = string.Format("{0}...", GMKTWebContext.Current.UserProfile.CustName.Substring(0, 4));
        }
        else {
            displayCustName = GMKTWebContext.Current.UserProfile.CustName;
        }
    }
							<!-- 로그인 후 -->
                            <div class="login">
								<span class="btn_login">@(displayCustName)님</span>
							</div>
    
@*
							<div class="grade">
								@(displayCustName)님
    @if (GMKTWebContext.Current.UserProfile.BuyerGrade == GMKT.Framework.BuyerGradeEnum.SVIP)
    { 
        @:<span class="m_flag svip"><span>svip</span></span>
    }
    else if (GMKTWebContext.Current.UserProfile.BuyerGrade == GMKT.Framework.BuyerGradeEnum.VIP)
    { 
        @:<span class="m_flag vip"><span>vip</span></span>
    }
    else if (GMKTWebContext.Current.UserProfile.BuyerGrade == GMKT.Framework.BuyerGradeEnum.Gold)
    { 
        @:<span class="m_flag gold"><span>gold</span></span>
    }
    else if (GMKTWebContext.Current.UserProfile.BuyerGrade == GMKT.Framework.BuyerGradeEnum.Silver)
    { 
        @:<span class="m_flag silver"><span>silver</span></span>
    }
    else if (GMKTWebContext.Current.UserProfile.BuyerGrade == GMKT.Framework.BuyerGradeEnum.New)
    { 
        @:<span class="m_flag new"><span>new</span></span>
    }
							
							</div>
*@
							<!-- //로그인 후 -->
}
else
{
							<!-- 로그인 전 -->
							<div class="login"><a class="btn_login" href="@Urls.LoginUrl">로그인을 해주세요</a></div>
							<!-- //로그인 전 -->
}    
							<div class="date">
								<strong>이번달 출석일수</strong>
								<span class="day">@attendance<span>일</span></span>
							</div>
						</div>
						<table summary="출석한날 표시 달력">
							<caption>출석체크 달력</caption>
							<thead>
								<tr>
									<th scope="col">S</th>
									<th scope="col">M</th>
									<th scope="col">T</th>
									<th scope="col">W</th>
									<th scope="col">T</th>
									<th scope="col">F</th>
									<th scope="col">S</th>
								</tr>
							</thead>
							<tbody>
@{
    int i, currentDay = 1;
								
								<tr>
	@for (i = 0; i < Model.StartDayOfThisMonth; i++)
 {
									<td></td>
 }
							
	@for (i = 0; i < 7 - Model.StartDayOfThisMonth; i++)
 {
     if (Model.AttendanceDate != null && Model.AttendanceDate.Contains(currentDay))
     {
										<td><div><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/img_pzone_cir.png" alt="" />@currentDay</div></td>
     }
     else
     {
										<td>@currentDay</td>
     }
     currentDay++;
 }
								</tr>
				 
    while (currentDay <= Model.EndDayOfThisMonth)
    {
									<tr>
		@for (i = 0; i < 7 && currentDay <= Model.EndDayOfThisMonth; i++)
  {
      if (Model.AttendanceDate != null && Model.AttendanceDate.Contains(currentDay))
      {
											<td><div><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/img_pzone_cir.png" alt="" />@currentDay</div></td>
      }
      else
      {
											<td>@currentDay</td>
      }
      currentDay++;
  }
		@for (; i < 7; i++)
  {
										<td></td>
  }
									</tr>
    }
}
							</tbody>
						</table>
					</div>
				</div>
				<!-- //달력 -->
			
@if (Model.PluszoneCouponList != null && Model.PluszoneCouponList.Count > 0)
{
                <!-- 경품응모 -->
				<div class="ent_wrap_main">
					<!--140225-->
					<div class="m_title">
						<h3>열심히 출석한 당신, 응모하세요!</h3>
						<a href="#" class="btn_more" onclick="popBlockUI('layer_bef');return false;"><span>혜택안내</span></a>
					</div>
					<!--//140225-->
					<div class="entry_prod">
						<ul class="entry_lst">
@{
    bool isOdd = true;
    string bannerUrl = string.Empty;
}
                            @foreach (var eachBanner in Model.PluszoneCouponList)
                            {
                                if (Model.AttendanceCount >= PluszoneModel.REQUIRED_ATTENDANCE_COUNT)
                                {
                                    bannerUrl = string.Format("{0}?str={1}&encStr={2}", Url.Action("CommonApplyEventPlatformGmarket", "Pluszone"), eachBanner.EidEncryptedString[0], eachBanner.EidEncryptedString[1]);
                                }
                                else if (PageAttr.IsLogin == false)
                                {
                                    bannerUrl = string.Format("javascript:fnApplyAlertLogin('{0}');", @Urls.LoginUrl);
                                }
                                else
                                {
                                    bannerUrl = string.Format("javascript:fnApplyAlertAttendance();");
                                }

                                if (isOdd == true)
                                {
                                    <li>
                                        <div class="img_bx"><img src="@eachBanner.BannerUrl" alt="" /></div>
                                        <span class="txt_bx"> 
                                            <span class="txt">일 1,000명</span> <strong class="em_txt">15회 이상 출석시</strong>
								            <a href="@bannerUrl" class="btn_entry">응모하기</a>
                                        </span>
                                    </li>
                                }
                                else
                                { 
                                    <!--완료일때-->
                                    <li>
                                        <div class="img_bx"><img src="@eachBanner.BannerUrl" alt="" /></div>
                                        <span class="txt_bx"> 
                                            <span class="txt">일 1,000명</span> <strong class="em_txt">15회 이상 출석시</strong>
								            <a href="@bannerUrl" class="btn_entry">응모하기</a>
                                        </span>
                                    </li>
                                }
                            }
                        </ul>
					</div>
				</div>
				<!-- //경품응모 -->
}
			</div>
		</div>

		<div class="box_dot_main">
			@if (Model.CouponBenefitItem != null && Model.CouponBenefitItem.Count > 0)
   { 
			<div class="box_benefit_main">
				@*
                <div class="m_title"><h3>쿠폰/혜택 바로가기</h3></div>
				<ul class="box_links">
                    @foreach (CouponBenefitItem eachCouponBenefitItem in Model.CouponBenefitItem)
                    {
                        if (string.IsNullOrEmpty(eachCouponBenefitItem.BenefitName) == true) { continue; }
                        
                        <li class="link01">
						    <a href="@eachCouponBenefitItem.LinkUrl">
							    <img src="@eachCouponBenefitItem.ImagePath" alt="" />
							    <span>@(new HtmlString(eachCouponBenefitItem.BenefitName))</span>
						    </a>
					    </li>
                    }
				</ul>
                *@
                <!--핫 이벤트: partial로 빼기-->
                <div class="m_title"><h3>HOT EVENT</h3></div>
				<div class="banner_box">
					<div id="bnGrp">
						<ul>
						<li><a href="#"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/sample_300x130.jpg" alt="" /></a></li>
						<li><a href="#"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/sample_300x130.jpg" alt="" /></a></li>
						<li><a href="#"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/sample_300x130.jpg" alt="" /></a></li>
						<li><a href="#"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/sample_300x130.jpg" alt="" /></a></li>
						<li><a href="#"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/sample_300x130.jpg" alt="" /></a></li>
						<li><a href="#"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/sample_300x130.jpg" alt="" /></a></li>
						<li><a href="#"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/sample_300x130.jpg" alt="" /></a></li>
						</ul>
					</div>
					<div id="bnTurn" class="bn_eturn">
						<button type="button" id="prev" class="prev" onclick="gallery1.prev();return false;"><span></span></button>
						<button type="button" id="next" class="next" onclick="gallery1.next();return false;"><span></span></button>
					</div>
					<div id="bnIndex12" class="bn_eindex">
						<p class="selected"></p>
						<p></p>
						<p></p>
						<p></p>
						<p></p>
						<p></p>
						<p></p>
						<p></p>
					</div>
				</div>			
			</div>
       
            <script type="text/javascript">
                /* 이미지 높이값 고정 */
                $(window).on("resize", function () {
                    setImgHeight();
                });
                function setImgHeight() {
                    var $bnr_img = $('#bnGrp a img');
                    $bnr_img.height($bnr_img.width() * 0.422); //0.422 : 배너 가로세로 비율
                }
                setImgHeight();
                /* //이미지 높이값 고정 */
			</script>
     }
        <!--인기기획전-->
            @if (Model.MobileShopPlanList != null && Model.MobileShopPlanList.Count > 0)
            {
			<div class="box_exhibit_main01">
				<div class="m_title">
					<h3>인기 기획전</h3>
					<a href="@Urls.MobileWebUrl/Display/SpecialShoppingList" class="btn_more" onclick="popBlockUI('layer_allsv');return false;"><span>더보기</span></a>
				</div>
                <div class="tab_supd">
					<div class="box_wp" id="supdTab">
						<div id="supdTabCnt" class="supd_cnt">
							<ul>
								<li class="on"><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate01_press@2x.png" alt="" /></span>기획전 전체</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate02@2x.png" alt="" /></span>패션의류</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate03@2x.png" alt="" /></span>신발/잡화</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate04@2x.png" alt="" /></span>화장품/헤어</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate05@2x.png" alt="" /></span>식품</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate06@2x.png" alt="" /></span>유아동/출산</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate07@2x.png" alt="" /></span>생활/주방/건강</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate08@2x.png" alt="" /></span>가구/침구</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate09@2x.png" alt="" /></span>스포츠/자동차</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate10@2x.png" alt="" /></span>컴퓨터/전자</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate11@2x.png" alt="" /></span>도서/음반</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate12@2x.png" alt="" /></span>여행</a></li>
								<li><a href="javascript:;"><span class="ic"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_cate13@2x.png" alt="" /></span>e쿠폰/티켓</a></li>
							</ul>
						</div>
						<button type="button" class="prev_p off">왼쪽으로</button>
						<button type="button" class="next_p off">오른쪽으로</button>
					</div>
				</div>	
                <script type="text/javascript">
                    var scrollTab = null;
                    var currentX = -1;
                    var $maxItemLI = $('#supdTabCnt li');
                    var $maxItemUL = $('#supdTabCnt ul');
                    //var screenSize = $(window).width();	
                    var maxValue = ($maxItemLI.width()) * $maxItemLI.length;
                    $maxItemUL.css('width', maxValue + 'px');

                    $(window).on("load resize", function () { // orientationchange
                        initIscroll('supdTabCnt', maxValue);

                        if (scrollTab) {
                            if (currentX > 0) {
                                scrollTab.currPageX = currentX;
                                scrollTab.scrollToPage(currentX, 0, 0);
                            }
                            if (currentX == -1) {
                                var nav = document.getElementById('supdTabCnt').querySelectorAll('li');
                                var index;
                                for (var i = 0; i < nav.length; i++) {
                                    if ($(nav)[i].className.indexOf('on') > -1) {
                                        index = i;
                                        break;
                                    }
                                }
                                scrollTab.scrollToPage(index - 1, 0, 0);
                            }
                        }
                    });

                    function initIscroll(id, max) {
                        var targetId = id;
                        if (max > document.getElementById(targetId).offsetWidth) {
                            if (scrollTab == null) scrollTab = new iScroll(targetId, { hScrollbar: false, vScrollbar: false, useTransform: false, snap: 'li',
                                onScrollEnd: function () {
                                    var ul = document.getElementById(targetId).querySelector('ul');
                                    var sideBtns = document.getElementById('supdTab').querySelectorAll('button');
                                    var pos = parseInt(ul.style.left.replace('px', ''));
                                    if (pos < 0) {
                                        $(sideBtns[0]).removeClass('off');
                                        $(sideBtns[0]).attr('onclick', 'scrollTab.scrollToPage("prev", 0);');
                                    } else {
                                        $(sideBtns[0]).addClass('off');
                                        $(sideBtns[0]).attr('onclick', '');
                                    }
                                    if (document.getElementById(targetId).offsetWidth + Math.abs(pos) < ul.offsetWidth) {
                                        $(sideBtns[1]).removeClass('off');
                                        $(sideBtns[1]).attr('onclick', 'scrollTab.scrollToPage("next", 0);');
                                    } else {
                                        $(sideBtns[1]).addClass('off');
                                        $(sideBtns[1]).attr('onclick', '');
                                    }
                                }
                            });
                        } else {
                            var sideBtns = document.getElementById(targetId).querySelectorAll('button');
                            $(sideBtns[0]).addClass('off');
                            $(sideBtns[0]).attr('onclick', '');
                            $(sideBtns[1]).addClass('off');
                            $(sideBtns[1]).attr('onclick', '');
                        }
                    }
				</script>
                <div class="event_lst">
                    <ul>
@{
                int intCount = 1;
                string strCount = "";
}
                    @foreach (MobileShopPlan eachShopPlan in Model.MobileShopPlanList)
                    {
                        if (string.IsNullOrEmpty(eachShopPlan.MobileThumbImageUrl) == true) { continue; }
                        if (intCount >= 10)   // FCD 코드 집계 추가 App 인식 오류로 인한 변수 값 지정
                        {
                            strCount = string.Format("7032000{0}", intCount);
                        }
                        else
                        {
                            strCount = string.Format("70320000{0}", intCount);
                        }
                        <li><a href="@eachShopPlan.LinkUrl"><img src="@eachShopPlan.MobileThumbImageUrl" alt="" /></a></li>                    
                        intCount++;
                    }
					</ul>
					<button type="button" class="btn_more">목록 더보기</button>
			    </div>
            </div>
            }
            
            <div class="layer_allsv" id="layer_allsv">
				<div class="lay_wp">
					<h3>인기 기획전 전체보기</h3>
					<div class="sevlist_wp">
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop01@2x.png" alt=""></span><span class="s_name">패션의류</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop02@2x.png" alt=""></span><span class="s_name">신발/잡화</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop03@2x.png" alt=""></span><span class="s_name">화장품/헤어</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop04@2x.png" alt=""></span><span class="s_name">유아동/출산</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop05@2x.png" alt=""></span><span class="s_name">식품</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop06@2x.png" alt=""></span><span class="s_name">생활/주방/건강</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop07@2x.png" alt=""></span><span class="s_name">가구/침구</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop08@2x.png" alt=""></span><span class="s_name">스포츠/자동차</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop09@2x.png" alt=""></span><span class="s_name">컴퓨터/전자</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop10@2x.png" alt=""></span><span class="s_name">도서/음반</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop11@2x.png" alt=""></span><span class="s_name">여행</span></a>
						<a href="#" class="noBorder noBorder"><span class="ico"><img src="@Urls.MobileImageShortUrl/mobile.gmarket/images/640/main/ic_pluszone/msd_catepop12@2x.png" alt=""></span><span class="s_name">e쿠폰/티켓</span></a>
					</div>
					<a href="#" class="lay_clse noBorder noBorder" onclick="popBlockUI('layer_allsv');return false;">닫기</a>
				</div>
			</div>
		</div>

@if (!PageAttr.IsIphone && !PageAttr.IsIpad && !PageAttr.IsIpod)
{
    if (PageAttr.IsAndroidApp)
    {
        <div class="add_homego"><a onclick="javascript:MobileAppUtil.SendAppScheme('Attendance', 500)">출석체크 홈 화면에 바로가기 추가</a></div>
    }
    else
    {			    
        <div class="add_homego"><a onclick="javascript:MobileAppUtil.CheckApplicationInstall('attendance')">출석체크 홈 화면에 바로가기 추가</a></div>
    }
} 

		<div class="share_sns" id="layer_sns">
			<h4 class="tit">공유하기</h4>

			<div class="sns">
				<a href="javascript:CheckPc(MobileSnsUtil.snsType().KAKAOTALK);" class="cco" id="SnsKakaoTalk">카카오톡</a>
				<a href="javascript:ShareTo(MobileSnsUtil.snsType().FACEBOOK);" class="face">페이스북</a>
				<a href="javascript:ShareTo(MobileSnsUtil.snsType().TWITTER);" class="twt">트위터</a>
				<a href="javascript:ShareTo(MobileSnsUtil.snsType().KAKAOSTORY);" class="ccos">카카오스토리</a>
			</div>
			<a href="#" class="close_sns" onclick="popBlockUI('layer_sns');return false;">닫기</a>
		</div>		

        <!--140225 혜택레이어 추가-->
		<div class="layer_allsv bef" id="layer_bef">
			<div class="lay_wp">
				<h3>플러스존 혜택안내</h3>
				<ul class="guide_bef">
@if (DateTime.Now < new DateTime(2014, 4, 1, 0, 0, 0))
{
					<li><span class="ttx">이벤트 기간</span>
						매월 1일부터 말일
					</li>
					<li><span class="ttx">참여 대상</span>
						플러스존 접속회원<br />
						(ID당 1일 1회, 웹과모바일은 중복 응모 불가)
					</li>
					<li><span class="ttx">쿠폰 사용기간</span>
						발급 후 1주일, 바로접속 구매시 사용가능<br />
						1천원쿠폰(1만원이상), 2천원쿠폰(2만원이상),<br />
						3천원쿠폰(3만원이상), 무료배송쿠폰(1만원이상)
					</li>
					<li><span class="ttx">스탬프 사용기간</span>
						발급 후 30일</li>
					<li><span class="ttx">마일리지 사용기간</span>
						발급 후 90일
					</li>
}
else
{
					<li><span class="ttx">이벤트 기간</span>
						매월 1일부터 말일
					</li>
					<li><span class="ttx">참여 대상</span>
						플러스존 접속회원<br />
						(ID당 1일 1회, 웹과 모바일은 중복 응모 불가)
					</li>
					<li><span class="ttx">쿠폰 사용기간</span>
						발급 후 1주일, 바로접속 구매시 사용가능<br />
						1천원쿠폰/무료배송쿠폰 : 1만원이상 구매시<br />
						사용가능
					</li>
					<li><span class="ttx">스탬프 사용기간</span>
						발급 후 30일간 사용가능(이후 자동소멸)</li>
					<li><span class="ttx">마일리지 사용기간</span>
						발급 후 90일간 사용가능(이후 자동소멸)
					</li>
}
				</ul>
				<a href="#" class="lay_clse" onclick="popBlockUI('layer_bef');return false;">닫기</a>
			</div>
		</div>
		<!--//140225 혜택레이어 추가-->
		
	</div>
	<!-- //CONTENT -->

@section scriptfiles
{
<script type="text/javascript" src="~/Scripts/jQueryRotate.2.2.js"></script>
<script type="text/javascript" src="~/Scripts/Pluszone.js?dummy=201312030821"></script>
<script type="text/javascript" src="@Urls.ScriptUrl/js/mobile/main/common/MobileSnsUtil.js?v=1"></script>
<script type="text/javascript" src="@Urls.ScriptUrl/js/mobile/main/common/MobileAppUtil.js"></script>
<script type="text/javascript" src="@Urls.ScriptUrl/js/mobile/main/common/kakao.js?v=1"></script>
<script type="text/javascript" src="@Urls.ScriptUrl/js/mobile/main/common/iscroll4.js"></script>
}

@section scripts
{
<script type="text/javascript">
	var ShareTo = function (type) {
		var dataName = "G마켓 출석체크";
		switch (type) {
			case MobileSnsUtil.snsType().KAKAOTALK:
				dataName = "출석체크";
				break;
			default:
				break;
		}
		var data = {
			"name": dataName,
			"url": "@Urls.MobileWebUrl" + "/Pluszone",
			"title": ""
		};
		if (type == "kakaotalk") {
			KakaoController('#SnsKakaoTalk', new SnsParam(type, data), 'home');
		}
		else {
			var sender = MobileSnsUtil.sns(type).sender;
			sender.send(type, new SnsParam(type, data))
		}
	}

	$(document).ready(function () {

		KakaoInit();
		ShareTo("kakaotalk");
		
		setTimeout(function () {
			displayLayer("progress_icon", "none");
        }, 100);

        /* landing Banner */
        var em = eModule
                    , apps = em.apps
                    , landing = apps.landing;

        landing.init({
            pageName: 'Pluszone',
            landingType: '@Model.LandingBanner.Type',
            imageUrl: '@Model.LandingBanner.ImageUrl',
            description: '@Model.LandingBanner.Description',
            campaign: '@Model.Campaign.Name',
            medium: '@Model.Campaign.Medium',
            mediumSource: '@Model.Campaign.MediumSource',
            mediumContent: '@Model.Campaign.MediumContent',
            term: '@Model.Campaign.Keyword'
        });

        $("#lay_notice").on('click', '#goToApp', function (e) {
            e.preventDefault();
            landing.installApp();
        }).on('click', '#landingClose', function (e) {
            e.preventDefault();
            landing.close();
        });
        /* landing Banner */

		var isRlttStartOn = false;

		$("#rlttStart").click(function (e) {
			e.preventDefault();
            
			if (false == isRlttStartOn) {
				if ("@{@PageAttr.IsLogin}" == "True" && "@{@Model.IsApply}" == "False") {
					//displayLayer("progress_icon", "initial"); for app
					isRlttStartOn = true;
                    
					$.ajax({
						type: "POST",
						url: "@Urls.EventNetRoot/PluszoneEventPlatform/Attend",
						data: {
							openerURL: location.href,
							isMobile: "Y",
							lang: "KO"
						},
						dataType: "jsonp",
						success: function (result) {
							displayLayer("progress_icon", "none");

							if (result.msgcode == "-1000") {
								alert(result.message);
							} else if (result.msgcode == "-2000") {
								alert("로그인이 필요합니다.");

								document.location.href = "@Urls.LoginUrl";
							} else if (result.msgcode == "S301" || result.msgcode == "G301") {
								var animateAngle = 1800 + (Math.floor(Math.random() * 26) + 2) + ANGLE_BETWEEN_ITEMS * (parseInt(result.rulletnum) - 1) - 0.5;

								$("#rlttImage").rotate({
									duration: 10000,
									animateTo: animateAngle,
									callback: function () {
										displayLayer("progress_icon", "initial");
										document.location.href = "@Urls.EventNetRoot" + result.msggourl;
									} //end callback
								});
							} else {
								document.location.href = "@Urls.EventNetRoot" + result.msggourl;
							}

						},
						error: function (result) {
							displayLayer("progress_icon", "none");
							alert("오류가 발생했습니다.");
						}
                        
					});
				} else if ("@{@PageAttr.IsLogin}" == "True") {
					alert("이미 출석 체크하였습니다.");
				} else {
					alert("로그인이 필요합니다.");

					document.location.href = "@Urls.LoginUrl";
				}

				isRlttStartOn = false;
			}
		});
	});

    $(document).ready(function () {

    });
</script>  

<script type="text/javascript">
    var gallery1,
						el,
						i,
						page,
						dots1 = document.querySelectorAll('#bnTurn button'),
						dots12 = document.querySelectorAll('#bnIndex12 p');
    /* HTML 파싱 */
    var bnGrpList1 = $("#bnGrp li");

    if (1 < bnGrpList1.length) {

        var bnGrpListAtag1 = [];

        // 시작포인트 랜덤
        var index1 = 0;
        var randomPage1 = Math.floor(Math.random() * (bnGrpList1.length));
        for (var j = randomPage1; j < bnGrpList1.length; j++, index1++) {
            bnGrpListAtag1[index1] = bnGrpList1[j].innerHTML;
        }
        if (randomPage1 > 0) {
            for (var j = 0; j < randomPage1; j++, index1++) {
                bnGrpListAtag1[index1] = bnGrpList1[j].innerHTML;
            }
        }

        var globalBnGrpListAtag1 = bnGrpListAtag1.join(",");
        /* //HTML 파싱 */

        gallery1 = new SwipeView('#bnGrp', {
            numberOfPages: bnGrpListAtag1.length,
            hastyPageFlip: true,
            flickTime: 1000
        });

        // Load initial data
        for (i = 0; i < 3; i++) {

            if (1 == bnGrpListAtag1.length) {
                page = i == 0 || 2 ? bnGrpListAtag1.length - 1 : i - 1;
            }
            else {
                page = i == 0 ? bnGrpListAtag1.length - 1 : i - 1;
            }
            el = document.createElement('span');
            el.innerHTML = bnGrpListAtag1[page];
            gallery1.masterPages[i].appendChild(el)

            el.width = bnGrpListAtag1[page].width;
            el.height = bnGrpListAtag1[page].height;
            el.onload = function () { this.className = ''; }
        }

        gallery1.onFlip(function () {
            var el,
								upcoming,
								i;

            for (i = 0; i < 3; i++) {
                upcoming = gallery1.masterPages[i].dataset.upcomingPageIndex;

                if (upcoming != gallery1.masterPages[i].dataset.pageIndex) {
                    el = gallery1.masterPages[i].querySelector('span');
                    el.innerHTML = bnGrpListAtag1[upcoming];
                }
            }
            document.querySelector('#bnIndex12 .selected').className = '';
            dots12[gallery1.pageIndex].className = 'selected';

            setImgHeight(); //140307추가
        });

        flicking("bnGrp", "prev", "next");

    } else if (1 == bnGrpList1.length) {

        var bnGrpListAtag1 = [];

        for (var j = 0; j < bnGrpList1.length; j++) {
            bnGrpListAtag1[j] = bnGrpList1[j].innerHTML;
        }
        var globalBnGrpListAtag1 = bnGrpListAtag1.join(",");
        /*140128*/
        var elSpan = document.createElement('span');
        elSpan.innerHTML = globalBnGrpListAtag1;
        document.querySelector('#bnGrp').appendChild(elSpan);
        //$("#bnGrp").append(globalBnGrpListAtag1);
        /* //140128*/

        flicking("bnGrp", "prev", "next");
    }
</script>
}

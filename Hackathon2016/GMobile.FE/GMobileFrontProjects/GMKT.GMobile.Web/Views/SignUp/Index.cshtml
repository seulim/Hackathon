@{
	Layout = null;
	string fromWhere = ViewBag.FromWhere;
	string signUpUrl = "SignUp/TermsAgreeForPP" + (String.IsNullOrEmpty(fromWhere) == true ? "" : "?fromWhere=" + fromWhere);
}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko">
<head>
<meta http-equiv="content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />
<meta http-equiv="Cache-Control" content="max-age=0" />
<meta name="format-detection" content="telephone=no" />
<title>Gmarket</title>
<link rel="stylesheet" type="text/css" href="@Urls.StyleUrlV2/join.css" />
<link rel="stylesheet" type="text/css" href="@Urls.StyleUrlV2/common.css" />
@*<link rel="stylesheet" type="text/css" href="http://mdev.gmarket.co.kr/HTML/Gmarket/css/320/common_2013.css" />*@
<script type="text/javascript" src="@Urls.ScriptUrl/js/mobile/main/common/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="@Urls.ScriptUrl/mobile/js/front_v4.js?v=4"></script>
<script type="text/javascript">
	window.onload = function () {
		setTimeout(function () {
			window.scrollTo(0, 1)
		}, 100);
	}

	var isAlreadyClick = false;

	function TrimString(s) {
		var m = s.match(/^\s*(\S+(\s+\S+)*)\s*$/);
		return (m == null) ? "" : m[1];
	}

	//숫자로만 되어있는지 확인1
	function isNumeric(s) {
		for (i = 0; i < s.length; i++) {
			c = s.substr(i, 1);
			if (c < "0" || c > "9") return false;
		}
		return true;
	}

	//숫자로만 되어있는지 확인
	function passonlynum(inText) {
		var ret;
		for (var i = 0; i < inText.length; i++) {
			ret = inText.charCodeAt(i);
			if (!((ret > 47) && (ret < 58))) {
				return true;
			}
		}
		return false;
	}

	var chkCompanyNo = function () {

		var hpInput = $("#hp_inp").val();
		var hpInput2 = $("#hp_inp2").val();
		var hpInput3 = $("#hp_inp3").val();

		if (hpInput.length != 3 || hpInput2.length != 2 || hpInput3.length != 5) {
			$(".retry_txt").show();
			return false;
		}

		if (!isNumeric(hpInput) || !isNumeric(hpInput2) || !isNumeric(hpInput3)) {
			$(".retry_txt").show();
			return false;
		}

		var regiNumber = TrimString(hpInput)+TrimString(hpInput2)+TrimString(hpInput3);

		var sum = 0;
		var getlist = new Array(10);
		var chkvalue = new Array("1", "3", "7", "1", "3", "7", "1", "3", "5");

		for (var i = 0; i < 10; i++) { getlist[i] = regiNumber.substring(i, i + 1); }
		for (var i = 0; i < 9; i++) { sum += getlist[i] * chkvalue[i]; }
		sum = sum + parseInt((getlist[8] * 5) / 10);
		sidliy = sum % 10;
		sidchk = 0;
		
		if (sidliy != 0) { sidchk = 10 - sidliy; }
		else { sidchk = 0; }

		if (sidchk != getlist[9]) {
			//alert("유효하지 않은 사업자 등록번호입니다.");
			$(".retry_txt").show();
			return false;
		}

		$(".retry_txt").hide();
		return true;
	}

	function onlyNumber(event) {
		event = event || window.event;
		var keyID = (event.which) ? event.which : event.keyCode;
		if ((keyID >= 48 && keyID <= 57) || (keyID >= 96 && keyID <= 105) || keyID == 8 || keyID == 46 || keyID == 37 || keyID == 39)
			return;
		else
			return false;
	}

	function removeChar(event) {
		event = event || window.event;
		var keyID = (event.which) ? event.which : event.keyCode;
		if (keyID == 8 || keyID == 46 || keyID == 37 || keyID == 39)
			return;
		else
			event.target.value = event.target.value.replace(/[^0-9]/g, "");

		if (event.target.value.length == event.target.maxLength) {
			if (event.target.id == "hp_inp") {
				$("#hp_inp2").focus();
			} else if (event.target.id == "hp_inp2") {
				$("#hp_inp3").focus();
			}
		}
		if (event.target.value.length > event.target.maxLength) {
			event.target.value = event.target.value.slice(0, event.target.maxLength);
		}

		chkCompanyNo();
	}

	$(document).ready(function () {
	    $("#find_cnt1 .btn_blue").on("click", function () {

	        if (!isAlreadyClick) {
	            isAlreadyClick = true;
	            var custType = "PC";
	            var bizNum = $("#hp_inp").val() + "-" + $("#hp_inp2").val() + "-" + $("#hp_inp3").val();

	            if (chkCompanyNo()) {
	                $.ajax({
	                    type: "POST",
	                    url: "/SignUp/GetVerificationRegistrationCorp",
	                    dataType: "json",
	                    data: {
	                        "corpIdNo": bizNum,
	                        "custType": custType
	                    },
	                    success: function (data) {
	                        if (data != null && data != undefined) {
	                            if (data.ResultCode != 0) {
	                                alert(data.ResultDescription);
	                                isAlreadyClick = false;
	                                return false;
	                            } else {
	                                // 약관 페이지로 이동
	                                $("#cType").val("PC"); 	//cType 개인 PP 사업자 PC  
	                                $("#companyNo").val(bizNum);
	                                //document.frmNext.submit();
	                                if (isAlreadyClick) {
	                                    $("#frmNext").submit();
	                                }
	                                else {
	                                    isAlreadyClick = false;
	                                    return false;
	                                }
	                            }
	                        } else {
	                            alert("인증에 문제가 발생하였습니다. 다시 시도해주세요.");
	                            isAlreadyClick = false;
	                            return false;
	                        }
	                        return true;
	                    },
	                    error: function (error) {
	                        alert("인증에 문제가 발생하였습니다. 다시 시도해주세요.");
	                        isAlreadyClick = false;
	                        return false;
	                    }
	                });
	            }
	            else {
	                isAlreadyClick = false;
	                return false;
	            }
	        }
	        else {
	            return false;
	        }

	    });
	});

</script>
</head>
<body>

<!-- WRAPPER -->
<div id="wrap">
	
	<!-- SKIP NAVI -->
	<div class="hp">
		<a href="#content">본문 바로가기</a>
	</div>
	<!-- //SKIP NAVI -->

	<!-- HEADER -->
	<div class="join_head main">
		<h1><a href="@Urls.MobileWebUrl"><span class="sp_join">Gmarket</span> <span class="txt">회원가입</span></a></h1>
		<ul class="join_status">
		<li class="selected">1 가입</li>
		<li>2 약관동의</li>
		<li>3 정보입력</li>
		<li>4 가입완료</li>
		</ul>
	</div>
	<!-- //HEADER -->

	<hr />
	
	<!-- CONTENT -->
	<div id="content" class="ctns">
		@using (Html.BeginForm("TermsAgree", "SignUp", FormMethod.Post, new { name = "frmNext", id = "frmNext", action = Url.Action("TermsAgree", "SignUp", null, "https") }))
		{
			@Html.Hidden("companyNo");
			@Html.Hidden("cType");
			@Html.Hidden("fromWhere", fromWhere);
		}
		<div class="join_cnt">
			<div class="main_cnt">
				<div class="choice">
					<a href="#" id="find_tab0" class="on" onclick="tabView(2,'find_tab',0,'find_cnt');">개인 구매회원</a>
					<a href="#" id="find_tab1" class="off" onclick="tabView(2,'find_tab',1,'find_cnt');">사업자 구매회원</a>
				</div>
				<div id="find_cnt0" class="cont_bx personal" id="indi_cont">
					<h3 class="join_txt">G마켓에 오신것을 환영합니다.</h3>
					<p class="join_txt2">지금 회원 가입하신 후 G마켓의 다양한 서비스를 만나보세요.</p>
					<div class="btn_bx">
						<a href="@signUpUrl" class="btn btn_blue">가입하기</a>
					</div>					@*<p class="join_txt2">본인인증 후 가입이 가능합니다.<br>휴대폰, 아이핀 인증 중 하나를 선택해 주세요.</p>
					<ul class="cfm_list">
					<li>
						<a href="/SignUp/SignUpAuth?mType=M&cType=PP&fType=MREGI">
							<span class="bg bg_phone"></span>
							<p>휴대폰 인증</p>
						</a>
					</li>
					<li>
						<a href="/SignUp/SignUpAuth?mType=I&cType=PP&fType=MREGI">
							<span class="bg bg_pin"></span>
							<p>아이핀 인증</p>
						</a>
					</li>
					</ul>*@
				</div>
				<div id="find_cnt1" class="cont_bx" id="company_cont" style="display:none">
					<h3 class="join_txt">G마켓에 오신것을 환영합니다.</h3>
					<div class="join_art num_bx">
						<div class="form_bx">
							<label for="hp_inp"><strong>사업자 등록번호</strong><span>10자리</span></label>
							<input type="number" id="hp_inp" title="사업자번호 첫번호" class="join_inp" maxlength="3" onkeydown="return onlyNumber(event)" onkeyup="removeChar(event)" >
							<span class="dash">-</span>
							<input type="number" id="hp_inp2" title="사업자번호 중간번호" class="join_inp" maxlength="2"  onkeydown="return onlyNumber(event)" onkeyup="removeChar(event)">
							<span class="dash">-</span>
							<input type="number" id="hp_inp3" title="사업자번호 끝번호" class="join_inp" maxlength="5"  onkeydown="return onlyNumber(event)" onkeyup="removeChar(event)">
							<p class="retry_txt" style="display:none">사업자 등록번호 10 자리를 정확히 입력해주세요</p>
						</div>
					</div>
					<p class="cen_info">
						인증에 문제가 있을 경우, NICE평가정보㈜ 고객센터(02-3771-1390)로 문의 부탁 드립니다.
					</p>
					<div class="btn_bx">
						<a href="#" class="btn btn_blue">인증</a>
					</div>
				</div>
				<p class="info_txt">개인, 사업자, 글로벌 판매회원 가입은 pc페이지에서 가능합니다.</p>			</div>
			
		</div>
		
	</div>
	<!-- //CONTENT -->
	<hr />

	<!-- FOOTER -->
	
	<!-- //FOOTER -->

</div>
<!-- //WRAPPER -->

</body>
</html>